name: exemplo-avancado
version: 1.0.0
description: Pacote de exemplo avançado demonstrando todos os recursos suportados pelo Merge
homepage: https://github.com/usuario/exemplo-avancado
license:
  - MIT
  - GPL-3.0-or-later
dependencies:
  - libfoo
  - libbar
src_uri:
  - https://example.com/exemplo-avancado-1.0.0.tar.gz
  - https://example.com/exemplo-avancado-extra-1.0.0.tar.gz
  - git+https://github.com/usuario/exemplo-avancado-extra.git@main
build_dir: ./build/exemplo-avancado
install_prefix: /usr/local
use_flags:
  - debug
  - optimize
  - gui
  - network
patches:
  - ./patches/fix-build.patch
  - ./patches/fix-install.patch
  - ./patches/extra-fix.patch
hooks:
  pre_build:
    - echo "Hook pre_build: configurando ambiente..."
    - export CFLAGS="-O2"
    - export LDFLAGS="-L/usr/local/lib"
  post_build:
    - echo "Hook post_build: executando testes..."
    - cd {build_dir}/build && make check
  pre_install:
    - echo "Hook pre_install: preparando diretório..."
    - mkdir -p /usr/local/share/exemplo-avancado
  post_install:
    - echo "Hook post_install: instalação concluída!"
    - echo "Pacote {name} instalado em {install_prefix}"
build_commands:
  - mkdir -p {build_dir}/build
  - cd {build_dir}/build && ../configure --prefix={install_prefix} --enable-debug={debug} --enable-optimization={optimize} --enable-gui={gui} --enable-network={network}
  - cd {build_dir}/build && make -j$(nproc)
install_commands:
  - cd {build_dir}/build && make install
